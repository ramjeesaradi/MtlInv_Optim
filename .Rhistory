const.rhs = sfg[,ncol(sfg)])
solObj <- lp(direction = "min",
objective.in = as.vector(priority[-1]),
const.mat = sfg[,-ncol(sfg)],
const.dir = rep("==",nrow(sfg)),
const.rhs = sfg[,ncol(sfg)])
as.vector(priority[-1])
solObj <- lp(direction = "min",
objective.in = as.vector(t(priority[-1])),
const.mat = sfg[,-ncol(sfg)],
const.dir = rep("==",nrow(sfg)),
const.rhs = sfg[,ncol(sfg)])
source('~/workspace/Veero Optim/optim.R')
View(priority)
sfg[is.na(as.matrix(sfg))]<-0
priority[is.na(as.matrix(priority))]<-0
is.na(as.matrix(priority))
priority[is.na(as.matrix(priority))]<-0
View(priority)
priority <- priority[,-1]
priority[is.na(as.matrix(priority))]<-0
source('~/workspace/Veero Optim/optim.R')
solObj
as.vector(t(priority))
solObj$solution
solObj$direction
solObj$x.count
solObj <- lp(direction = "min",
objective.in = as.vector(t(priority)),
const.mat = sfg[,-ncol(sfg)],
const.dir = rep("==",nrow(sfg)),
const.rhs = sfg[,ncol(sfg)],
all.int = T)
solObj$solution
solObj <- lp(direction = "min",
objective.in = as.vector(t(priority)),
const.mat = sfg[,-ncol(sfg)],
const.dir = rep("==",nrow(sfg)),
const.rhs = sfg[,ncol(sfg)],
all.int = T)
sfg[,ncol(sfg)]
solObj <- lp(direction = "min",
objective.in = as.vector(t(priority)),
const.mat = sfg[,-ncol(sfg)],
const.dir = rep(">=",nrow(sfg)),
const.rhs = sfg[,ncol(sfg)],
all.int = T)
solObj$solution
solObj$\
solObj$status
solObj$constraints
solObj <- lp(direction = "min",
objective.in = as.vector(t(priority)),
const.mat = sfg[,-ncol(sfg)],
const.dir = rep(">=",nrow(sfg)),
const.rhs = sfg[,ncol(sfg)],
transpose.constraints =FALSE,
all.int = T)
solObj$solution
solObj <- lp(direction = "min",
objective.in = as.vector(t(priority)),
const.mat = sfg[,-ncol(sfg)],
const.dir = rep("==",nrow(sfg)),
const.rhs = sfg[,ncol(sfg)],
transpose.constraints =FALSE,
all.int = T)
#sfgrm[sfgrm$sfg == "870-11410C",]
solObj$solution
solObj$solution
solObj <- lp(direction = "min",
objective.in = as.vector(t(priority)),
const.mat = sfg[,-ncol(sfg)],
const.dir = rep(">=",nrow(sfg)),
const.rhs = sfg[,ncol(sfg)],
transpose.constraints =FALSE,
all.int = T)
solObj$solution
solObj <- lp(direction = "min",
objective.in = as.vector(t(priority)),
const.mat = sfg[,-ncol(sfg)],
const.dir = rep(">=",nrow(sfg)),
const.rhs = sfg[,ncol(sfg)],
# transpose.constraints =FALSE,
all.int = T)
priority[is.na(as.matrix(priority))]<-1
solObj <- lp(direction = "min",
objective.in = as.vector(t(priority)),
const.mat = sfg[,-ncol(sfg)],
const.dir = rep(">=",nrow(sfg)),
const.rhs = sfg[,ncol(sfg)],
# transpose.constraints =FALSE,
all.int = T)
solObj$solution
View(priority)
source('~/workspace/Veero Optim/optim.R')
solObj$solution
source('~/workspace/Veero Optim/optim.R')
solObj$solution
sfg[,ncol(sfg)]
solObj <- lp(direction = "min",
objective.in = as.vector(t(priority)),
const.mat = sfg[,-ncol(sfg)],
const.dir = rep(">=",nrow(sfg)),
const.rhs = sfg[,ncol(sfg)],
transpose.constraints =FALSE,
all.int = T)
solObj$solution
source('~/workspace/Veero Optim/optim.R')
source('~/workspace/Veero Optim/optim.R')
t(priority)
source('~/workspace/Veero Optim/optim.R')
source('~/.active-rstudio-document')
tstobj <- lp ("max", f.obj, f.con, f.dir, f.rhs)
tstobj$solution
source('~/workspace/Veero Optim/optim.R')
View(f.con)
sfg[,ncol(sfg)]
t(priority[1,])
(priority[1,])
c(priority[1,])
source('~/workspace/Veero Optim/optim.R')
source('~/workspace/Veero Optim/optim.R')
solObj$objective
source('~/workspace/Veero Optim/optim.R')
source('~/workspace/Veero Optim/optim.R')
solObj$objective
source('~/workspace/Veero Optim/optim.R')
source('~/workspace/Veero Optim/optim.R')
source('~/workspace/Veero Optim/optim.R')
priority[is.na(as.matrix(priority))]<-1
source('~/workspace/Veero Optim/optim.R')
source('~/workspace/Veero Optim/optim.R')
source('~/workspace/Veero Optim/optim.R')
source('~/.active-rstudio-document')
tstobj$solution
rep(">=",nrow(sfg)
)
source('~/workspace/Veero Optim/optim.R')
source('~/workspace/Veero Optim/optim.R')
length(solObj$solution)
source('~/workspace/Veero Optim/optim.R')
source('~/workspace/Veero Optim/optim.R')
sfg[,-c(1,ncol(sfg))]
source('~/workspace/Veero Optim/optim.R')
View(sfgreq)
View(sfgrm)
View(sfgreq)
const.rhs = sfg[,ncol(sfg)]
source('~/workspace/Veero Optim/optim.R')
install.packages(c("gtable", "nlme", "RcppEigen", "RCurl", "scales"))
inp1$month <- months.Date(inp1$Forecast.Month)
inp1$month <- months.Date(as.Date(inp1$Forecast.Month))
View(inp1)
months <-  format(as.Date(inp1$Forecast.Month), %m)
months <-  format(as.Date(inp1$Forecast.Month), "%m")
months <-  as.numeric(format(as.Date(inp1$Forecast.Month), "%m"))
inp1$month <- months - min(months)
View(inp1)
inp1$month <- diff.Date(months,min(months))
diff.Date(months,min(months))
months <-  as.Date(inp1$Forecast.Month)
inp1$month <- diff.Date(months,min(months))
diff.Date(months,min(months))
inp1$month <- difftime(months,min(months),units = "months")
inp1$month <- difftime(months,min(months),units = "days")
View(inp1)
inp1$month <- round(difftime(months,min(months),units = "days")/30)
sfg <- merge(sfgrm,sfgreq,by = c("sfg","month"))
source('~/workspace/Veero Optim/optim.R')
source('~/workspace/Veero Optim/optim.R')
View(sfgrm)
source("Fns.R")
source('~/workspace/Veero Optim/optim.R')
df[1,]<- c(1,1,1)
df <- NULL
df[1,]<- c(1,1,1)
View(sfgreq)
View(inp1)
inp1$nsfg <- 1/Raw.Material.required.quantity
source('~/workspace/Veero Optim/optimDataPrep.R')
source('~/workspace/Veero Optim/optimDataPrep.R')
solObj <- lp(direction = "min",
objective.in = priority,
const.mat = sfg[,-ncol(sfg)],
const.dir = rep(">=",nrow(sfg)),
const.rhs = sfg[,ncol(sfg)]
# transpose.constraints =FALSE,
# all.int = T
)
solObj$solution
inp1$Raw.Material..Number <- rapply(cbind(Raw.Material..Number,Raw.Material.Sizes..Breadth.,Raw.Material.Sizes..Length.), paste)
inp1$Raw.Material..Number <- sapply(cbind(Raw.Material..Number,Raw.Material.Sizes..Breadth.,Raw.Material.Sizes..Length.), paste)
inp1$Raw.Material..Number <- sapply(
t(cbind(Raw.Material..Number,Raw.Material.Sizes..Breadth.,Raw.Material.Sizes..Length.)),
paste)
sapply(
t(cbind(Raw.Material..Number,Raw.Material.Sizes..Breadth.,Raw.Material.Sizes..Length.)),
paste)
inp1$Raw.Material..Number <- sapply(
t(cbind(Raw.Material..Number,Raw.Material.Sizes..Breadth.,Raw.Material.Sizes..Length.)),
paste, collapse = "_")
sapply(
t(cbind(Raw.Material..Number,Raw.Material.Sizes..Breadth.,Raw.Material.Sizes..Length.)),
paste, collapse = "_")
t(cbind(Raw.Material..Number,Raw.Material.Sizes..Breadth.,Raw.Material.Sizes..Length.))
(cbind(Raw.Material..Number,Raw.Material.Sizes..Breadth.,Raw.Material.Sizes..Length.)),
paste, collapse = "_")
inp1$Raw.Material..Number <- sapply(
(cbind(Raw.Material..Number,Raw.Material.Sizes..Breadth.,Raw.Material.Sizes..Length.)),
paste)
sapply(
(cbind(Raw.Material..Number,Raw.Material.Sizes..Breadth.,Raw.Material.Sizes..Length.)),
paste)
inp1$Raw.Material..Number <- sapply(
(cbind(Raw.Material..Number,Raw.Material.Sizes..Breadth.,Raw.Material.Sizes..Length.)),
function (x) paste(x,collapse = " "))
sapply(
(data.frame(Raw.Material..Number,Raw.Material.Sizes..Breadth.,Raw.Material.Sizes..Length.)),
function (x) paste(x,collapse = " "))
sapply(
t(data.frame(Raw.Material..Number,Raw.Material.Sizes..Breadth.,Raw.Material.Sizes..Length.)),
function (x) paste(x,collapse = " "))
t(data.frame(Raw.Material..Number,Raw.Material.Sizes..Breadth.,Raw.Material.Sizes..Length.))
rapply(
(data.frame(Raw.Material..Number,Raw.Material.Sizes..Breadth.,Raw.Material.Sizes..Length.)),
function (x) paste(x,collapse = " "))
capply(
(data.frame(Raw.Material..Number,Raw.Material.Sizes..Breadth.,Raw.Material.Sizes..Length.)),
function (x) paste(x,collapse = " "))
rapply(
t(data.frame(Raw.Material..Number,Raw.Material.Sizes..Breadth.,Raw.Material.Sizes..Length.)),
function (x) paste(x,collapse = " "))
sapply(
data.frame(rbind(Raw.Material..Number,Raw.Material.Sizes..Breadth.,Raw.Material.Sizes..Length.)),
function (x) paste(x,collapse = " "))
source('~/workspace/Veero Optim/optimDataPrep.R')
solObj <- lp(direction = "min",
objective.in = priority,
const.mat = sfg[,-ncol(sfg)],
const.dir = rep(">=",nrow(sfg)),
const.rhs = sfg[,ncol(sfg)]
# transpose.constraints =FALSE,
# all.int = T
)
solObj
priority <- priority-1
solObj <- lp(direction = "min",
objective.in = priority,
const.mat = sfg[,-ncol(sfg)],
const.dir = rep(">=",nrow(sfg)),
const.rhs = sfg[,ncol(sfg)]
# transpose.constraints =FALSE,
# all.int = T
)
solObj
source('~/workspace/Veero Optim/optimDataPrep.R')
source("optimDataPrep.R")
source("optimObj.R")
solObj <- lp(direction = "min",
objective.in = priority,
const.mat = sfg[,-ncol(sfg)],
const.dir = rep(">=",nrow(sfg)),
const.rhs = sfg[,ncol(sfg)]
# transpose.constraints =FALSE,
# all.int = T
)
solObj
View(priority)
min(priority)
View(sfg)
source("optimDataPrep.R")
source("optimObj.R")
solObj <- lp(direction = "min",
objective.in = priority,
const.mat = sfg[,-ncol(sfg)],
const.dir = rep(">=",nrow(sfg)),
const.rhs = sfg[,ncol(sfg)]
# transpose.constraints =FALSE,
# all.int = T
)
solObj$solution
solObj
inp2 <- read.csv("input2.csv")
View(inp2)
View(inp1)
View(inp2)
inp2
attach(inp2)
inp2 <- read.csv("input2.csv")
attach(inp2)
inp2$Raw.Material..Number <- sapply(
data.frame(t(inp2[,c("Meterial.Code","RM.Stock.with.Sizes..Length...Breadth.","Breadth")])),
function (x) paste(x,collapse = "-"))
inp2 <- read.csv("input2.csv")
attach(inp2)
inp2$Raw.Material..Number <- sapply(
data.frame(t(inp2[,c("Material.Code","RM.Stock.with.Sizes..Length...Breadth.","Breadth")])),
function (x) paste(x,collapse = "-"))
params <- list()
params$inventory <- inp2
source("optimDataPrep.R")
source("optimObj.R")
sfg <- rmclmn(sfg[sfg$month == 0,], c("sfg","month"))
solObj <- lp(direction = "min",
objective.in = priority,
const.mat = sfg[,-ncol(sfg)],
const.dir = rep(">=",nrow(sfg)),
const.rhs = sfg[,ncol(sfg)]
# transpose.constraints =FALSE,
# all.int = T
)
solObj
solObj$solution
source('~/workspace/Veero Optim/optim.R')
solObj$solution
params$PartRMComb
params$PartRMComb <- names(sfg[,-ncol(sfg)])
sol <- solObj$solution
sol <- data.frame(t(sol))
sol
names(sol) <- params$PartRMComb
source("optimDataPrep.R")
names(sol) <- params$PartRMComb0
sol
solMel <- melt(sol)
sol
solMel
solMel <- melt(sol, c("sfg","RM"))
View(sol)
sol <- solObj$solution
sapply(params$PartRMComb0, function (x) paste(x,sep = "_"))
paste("04442031AA _2021141-305-1580",sep = "_")
paste0(1:12)
paste0(1:12)[1]
gsub("^[.]_","","S1A89220D_2021364-98.5-1250")
gsub("[.]_","","S1A89220D_2021364-98.5-1250")
gsub(".*?_","","S1A89220D_2021364-98.5-1250")
sol1 <- data.frame(Rm=sapply(params$PartRMComb0, function (x) gsub(".*?_","",x) ),Qnty= sol)
View(sol1)
sol1 <- data.frame(RM=sapply(params$PartRMComb0, function (x) gsub(".*?_","",x) ),Qnty= sol)
solAggr <- aggregate(sol1, Qnty~Rm)
solAggr <- aggregate(sol1, Qnty~RM,sum)
solAggr <- aggregate(sol1, "RM",sum)
solAggr <- aggregate(Qnty~RM,sol1,sum)
View(solAggr)
inventory <- merge(params$inventory,solAggr, by.x = "Raw.Material..Number",by.y = "RM", all.x = T)
invUtil <- inventory$Ware.house.Stock - inventory$Qnty
invUtil
View(solAggr)
View(inventory)
View(sol1)
View(solAggr)
source('~/workspace/Veero Optim/optim.R')
sol <- solObj$solution
sol
View(inp1)
View(sfg0)
source('~/workspace/Veero Optim/optim.R')
sol1 <- data.frame(RM=sapply(params$PartRMComb0, function (x) gsub(".*?_","",x) ),Qnty= sol)
solAggr <- aggregate(Qnty~RM,sol1,sum)
inventory <- merge(params$inventory,solAggr, by.x = "Raw.Material..Number",by.y = "RM", all.x = T)
invUtil <- inventory$Ware.house.Stock - inventory$Qnty
View(inventory)
sol
View(sol1)
sol1 <- data.frame(RM=sapply(params$PartRMComb0, function (x) gsub(".*?_","",x) ),Qnty= sol)
solAggr <- aggregate(Qnty~RM,sol1,sum)
inventory <- merge(params$inventory,solAggr, by.x = "Raw.Material..Number",by.y = "RM", all = T)
invUtil <- inventory$Ware.house.Stock - inventory$Qnty
setwd("/Users/Admin/Documents/workspace/Sales Estimation by Geo/ShinyApp/")
source("helpers.R")
View(crprain)
View(crprain)
runApp()
source('~/workspace/Veero Optim/optimDataPrep.R')
rm1 <- inp1[,c("Raw.Material..Number","Raw.Material.Sizes..Breadth.","Raw.Material.Sizes..Length.")]
rm2 <- inp2[,c("Material.Code","Breadth","RM.Stock.with.Sizes..Length...Breadth.")]
rm <- rbind(rm1,rm2)
names(rm1) <- c("RM","Breadth","Length")
names(rm2) <- c("RM","Breadth","Length")
rm <- rbind(rm1,rm2)
View(rm)
source('~/workspace/Veero Optim/optimDataPrep.R')
source('~/workspace/Veero Optim/optimDataPrep.R')
View(rm)
rm <- unique(rm)
View(rm)
rmpart <- merge(rm,inp1,
by.x = c("RM","Breadth","Length"),
by.y =c("Raw.Material..Number","Raw.Material.Sizes..Breadth.","Raw.Material.Sizes..Length."),
all.x = T)
View(rmpart)
rmpart <- merge(rm,inp1,
by.x = c("RM"),
by.y =c("Raw.Material..Number"),
all.x = T)
View(rm)
View(rmpart)
rmpart <- merge(rm,
unique(inp1[,c("Semi.Finished.Material.Number", "Finished.Semi.FinishedMaterial.Sizes..Length...Breadth.","Breadth","Raw.Material..Number")]),
by.x = c("RM"),
by.y =c("Raw.Material..Number"),
all.x = T)
View(rmpart)
source('~/workspace/Veero Optim/optimDataPrep.R')
View(inp2)
View(rmpart)
source('~/workspace/Veero Optim/optimDataPrep.R')
rowsum(sfg0)
rowMeans(sfg0)
rmpart <- unique(merge(rm,
unique(inp1[,c("Semi.Finished.Material.Number", "Finished.Semi.FinishedMaterial.Sizes..Length...Breadth.","Breadth","Raw.Material..Number")]),
by.x = c("RM"),
by.y =c("Raw.Material..Number"),
all.x = T))
View(rmpart)
names(rmpart) <- c("RM","RM.Breadth","RM.Length","SFG","SFG.Length","SFG.Breadth")
inp1$Priority.List.Mentioned.in.BOM[is.na(inp1$Priority.List.Mentioned.in.BOM)]<- 1
rmpart$priority <- merge(rmpart,
inp2,
by.x = c("RM","RM.Breadth","RM.Length","SFG"),
by.y = c("Raw.Material..Number","Raw.Material.Sizes..Breadth.","Raw.Material.Sizes..Length.", "Semi.Finished.Material.Number"),
all.x = T)[,"Priority.List.Mentioned.in.BOM"]
rmpart$priority <- merge(rmpart,
inp1,
by.x = c("RM","RM.Breadth","RM.Length","SFG"),
by.y = c("Raw.Material..Number","Raw.Material.Sizes..Breadth.","Raw.Material.Sizes..Length.", "Semi.Finished.Material.Number"),
all.x = T)[,"Priority.List.Mentioned.in.BOM"]
merge(rmpart,
inp1,
by.x = c("RM","RM.Breadth","RM.Length","SFG"),
by.y = c("Raw.Material..Number","Raw.Material.Sizes..Breadth.","Raw.Material.Sizes..Length.", "Semi.Finished.Material.Number"),
all.x = T)[,"Priority.List.Mentioned.in.BOM"]
rmpart$priority <- merge(rmpart,
inp1,
by.x = c("RM","RM.Breadth","RM.Length","SFG"),
by.y = c("Raw.Material..Number","Raw.Material.Sizes..Breadth.","Raw.Material.Sizes..Length.", "Semi.Finished.Material.Number"),
all.x = T)[,"Priority.List.Mentioned.in.BOM"]
rmpart <- merge(rmpart,
inp1,
by.x = c("RM","RM.Breadth","RM.Length","SFG"),
by.y = c("Raw.Material..Number","Raw.Material.Sizes..Breadth.","Raw.Material.Sizes..Length.", "Semi.Finished.Material.Number"),
all.x = T)[,c("RM","RM.Breadth","RM.Length","SFG","SFG.Length","SFG.Breadth","Priority.List.Mentioned.in.BOM")]
View(rmpart)
names(rmpart) <- c("RM","RM.Breadth","RM.Length","SFG","SFG.Length","SFG.Breadth","Priority")
rmpart <- merge(rmpart,
inp1,
by.x = c("RM","RM.Breadth","RM.Length","SFG"),
by.y = c("Raw.Material..Number","Raw.Material.Sizes..Breadth.","Raw.Material.Sizes..Length.", "Semi.Finished.Material.Number"),
all.x = T)[,c("RM","RM.Breadth","RM.Length","SFG","SFG.Length","SFG.Breadth","Priority.List.Mentioned.in.BOM","Raw.Material.required.quantity")]
names(rmpart) <- c("RM","RM.Breadth","RM.Length","SFG","SFG.Length","SFG.Breadth","Priority","Qnty")
rmpart$Qnty <- 1/rmpart$Qnty
View(sfg0)
View(sfg)
View(sfg)
write.csv(sfg,"sfg.csv")
View(sfg0)
View(sfg)
View(rmpart)
rmpart$Priority[is.na(rmpart$Priority)] <- 1+ max(rmpart$Priority)
attach(rmpart)
rmpart$Qnty <- goodsPerRawMet(RM.Length,RM.Breadth,SFG.Length,SFG.Breadth)
rmpart$SFG_ <- rmpart$SFG
sfg <- cast(rmpart,SFG ~ SFG_+Qnty,
max,
fill=0)
sfg <- cast(rmpart,SFG ~ SFG_+RM+RM.Length+RM.Breadth,
value = "Qnty"
max,
fill=0)
sfg <- cast(rmpart,SFG ~ SFG_+RM+RM.Length+RM.Breadth,
value = "Qnty",
fun.aggregate = max,
fill=0)
View(sfg0)
View(rmpart)
rmpart$Priority[is.na(rmpart$Priority)] <- 1+ max(rmpart$Priority)
View(rmpart)
max(rmpart$Priority)
rmpart$Priority
rmpart$Priority[is.na(rmpart$Priority)] <- 1+ max(as.numeric(rmpart$Priority))
max(as.numeric(rmpart$Priority))
max(rmpart$Priority[!is.na(rmpart$Priority)])
rmpart$Priority[is.na(rmpart$Priority)] <- 1+ max(rmpart$Priority[!is.na(rmpart$Priority)])
conv <- read.csv("conversion.csv", skip = 10)
View(conv)
rm <- rbind(rm1,rm2,rm3)
source('~/workspace/Veero Optim/optimDataPrep.R')
rmpart$Qnty <- goodsPerRawMet(RM.Length,RM.Breadth,sfL = SFG.Length,sfW = SFG.Breadth)
rmpart$SFG_ <- rmpart$SFG
sfg <- cast(rmpart,SFG ~ SFG_+RM+RM.Length+RM.Breadth,
value = "Qnty",
fun.aggregate = max,
fill=0)
View(sfg)
rm <- rm[which(!is.na(rm$RM.Breadth) && !is.na(rm$RM.Length)),]
View(rm)
rm <- rbind(rm1,rm2,rm3)
rm <- unique(rm)
rm <- rm[which(!(is.na(rm$RM.Breadth) && is.na(rm$RM.Length))),]
rm <- rbind(rm1,rm2,rm3)
rm <- unique(rm)
rm <- rm[which(!(is.na(rm$RM.Breadth) & is.na(rm$RM.Length))),]
View(rm)
getwd()
source('~/Documents/workspace/MtlInv_Optim/optimDataPrep.R')
install.packages("lpSolve")
source('~/Documents/workspace/MtlInv_Optim/optimDataPrep.R')
install.packages("reshape")
source('~/Documents/workspace/MtlInv_Optim/optimDataPrep.R')
install.packages("dummies")
source('~/Documents/workspace/MtlInv_Optim/optimDataPrep.R')
